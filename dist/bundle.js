(()=>{"use strict";var e={136:(e,t)=>{function n(e,t){for(var n=[],a=Math.floor(e/t),o=1;o<a;o++)n.push(o*t);return n.push(e-a*t),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=document.createElement("img");t.src=e.level.getBgImg();var a=n(t.width,e.canvas.width),o=n(t.height,e.canvas.height),i=e.mainCharacter.getX()<e.canvas.width?0:a[Math.floor(t.width/e.mainCharacter.getX())-1],r=e.mainCharacter.getY()<e.canvas.height?0:o[Math.floor(t.height/e.mainCharacter.getY())-1];return t.onload=function(){return e.context.drawImage(t,i,r,e.canvas.width,e.canvas.height,0,0,e.canvas.width,e.canvas.height)},t}},386:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=n(307),o=function(){function e(){var e=this;this.getX=function(){return e.x},this.getY=function(){return e.y},this.resetPosition(),this.angle=a.default.right,this.setBgStart(0,0)}return e.prototype.resetPosition=function(){this.x=50,this.y=10},e.prototype.setBgStart=function(e,t){this.bgStartX=e,this.bgStartY=t},e.prototype.setLimits=function(e,t){this.limitX=e,this.limitY=t},e.prototype.moveUp=function(){this.rotate(a.default.up),this.y>0&&--this.y},e.prototype.moveDown=function(){this.rotate(a.default.down),this.y<this.limitY&&++this.y},e.prototype.moveLeft=function(){this.rotate(a.default.left),this.x>0&&--this.x},e.prototype.moveRight=function(){this.rotate(a.default.right),this.x<this.limitX&&++this.x},e.prototype.rotate=function(e){this.angle=e},e.prototype.applyRotation=function(e){e.translate(this.x,this.y),e.rotate(this.angle),e.translate(-this.x,-this.y)},e.prototype.paint=function(e){var t=this,n=document.createElement("img");n.src="./images/turtle.png",n.onload=function(){t.applyRotation(e),e.drawImage(n,t.x-t.bgStartX,t.y-t.bgStartY,n.width/4,n.height/4),e.resetTransform()}},e}();t.default=o},307:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={up:0,right:Math.PI/2,down:Math.PI,left:Math.PI+Math.PI/2};t.default=n},417:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=n(691),o=n(244),i=n(525);t.default=function(e,t){(0,a.default)(e,t),(0,i.default)(e,t),(0,o.default)(e,t)}},691:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.addEventListener("keydown",(function(e){return function(e,t){["w","W","ArrowUp"].includes(e.key)&&t.moveUp(),["s","S","ArrowDown"].includes(e.key)&&t.moveDown(),["a","A","ArrowLeft"].includes(e.key)&&t.moveLeft(),["d","D","ArrowRight"].includes(e.key)&&t.moveRight()}(e,t)}))}},244:(e,t)=>{function n(e,t){var n,a;if(e.preventDefault(),e instanceof TouchEvent){var o=e.touches[0];n=o.pageX,a=o.pageY}else n=e.pageX,a=e.pageY;n<t.getX()&&t.moveLeft(),n>t.getX()&&t.moveRight(),a<t.getY()&&t.moveUp(),a>t.getY()&&t.moveDown()}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){PointerEvent?(e.addEventListener("pointerdown",(function(e){return n(e,t)})),e.addEventListener("pointermove",(function(e){return n(e,t)}))):(e.addEventListener("touchstart",(function(e){return n(e,t)})),e.addEventListener("touchmove",(function(e){return n(e,t)})))}},525:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.addEventListener("wheel",(function(e){return function(e,t){e.preventDefault(),e.deltaX<0&&t.moveLeft(),e.deltaX>0&&t.moveRight(),e.deltaY<0&&t.moveUp(),e.deltaY>0&&t.moveDown()}(e,t)}))}},212:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=n(487),o=function(){function e(){}return e.modal=function(e,t){var n=this;if(!document.getElementById(t.id)){var o=document.createElement("div");if(o.tabIndex=1,o.id=t.id,o.classList.add("dialog","fixed","text-white","w-4/5","opacity-80","focus:opacity-95","bg-amber-500","dark:bg-gray-900","pt-5","pb-5","rounded-3xl","max-w-xl"),t.title){var i=document.createElement("h1");i.innerText=t.title,i.classList.add("text-center","text-xl"),o.appendChild(i),o.appendChild(document.createElement("hr"))}var r=document.createElement("div");switch(this.appendText(t.text,r),o.appendChild(r),e){case a.DialogType.Confirmation:var l=t,d=document.createElement("div");d.classList.add("w-fit","m-auto"),o.appendChild(d),this.appendBtn(d,"Yes",(function(){l.yesCallback(),n.closeModal(o)}),!1,"button"),this.appendBtn(d,"No",(function(){l.noCallback(),n.closeModal(o)}),!0,"button");break;case a.DialogType.Notification:this.appendOKButton(o),this.listenKeyboard(o);break;case a.DialogType.Prompt:var s=t;this.appendForm(o,s);break;case a.DialogType.Credits:s=t,this.appendCredits(r,s),this.appendOKButton(o),this.listenKeyboard(o);break;case a.DialogType.Menu:s=t,this.appendMenu(o,s),this.appendOKButton(o),this.listenKeyboard(o);break;case a.DialogType.Changelog:s=t,this.appendChangelog(o,s),this.appendOKButton(o),this.listenKeyboard(o)}document.body.appendChild(o)}},e.appendBtn=function(e,t,n,a,o){var i=document.createElement("button");i.type=o,i.classList.add("rounded-3xl","m-1","cursor-pointer"),this.assignButtonColor(i,a);var r=document.createElement("span");r.classList.add("text-xl","ml-2","mr-2"),r.innerText=t,i.appendChild(r),"button"===o&&i.addEventListener("click",n),e.appendChild(i)},e.appendForm=function(e,t){var n=this,a=document.createElement("div");a.classList.add("m-auto","w-3/4"),e.appendChild(a);var o=document.createElement("form");a.appendChild(o),o.addEventListener("submit",(function(a){a.preventDefault(),t.onOK&&t.onOK(),n.closeModal(e)})),this.appendInputs(o,t.inputs),this.appendSelects(o,t.selects);var i=document.createElement("div");i.classList.add("w-fit","m-auto"),o.appendChild(i),this.appendBtn(i,"OK",null,!1,"submit"),this.appendBtn(i,"Cancel",(function(){t.onCancel&&t.onCancel(),n.closeModal(e)}),!0,"button")},e.appendInputs=function(e,t){for(var n=0,a=t;n<a.length;n++){var o=a[n],i=document.createElement("input");i.type=o.type,i.id="dialog-input-".concat(o.name),i.name="dialog-input-".concat(o.name),i.ariaPlaceholder="Enter ".concat(o.label),i.placeholder="Enter ".concat(o.label),i.maxLength=o.limit,this.assignInputClassNames(i),i.required=o.required,i.ariaRequired=o.required.toString(),e.appendChild(i),this.appendBrElement(e),this.appendBrElement(e)}},e.assignInputClassNames=function(e){e.classList.add("text-center","w-full","rounded-3xl","h-9","text-lg","text-gray-700")},e.appendSelects=function(e,t){for(var n=function(t){var n=document.createElement("select");n.id="dialog-select-".concat(t.name),n.name="dialog-select-".concat(t.name),n.ariaPlaceholder=t.label,a.assignInputClassNames(n),n.required=t.required,n.ariaRequired=t.required.toString(),e.appendChild(n);for(var o=0,i=t.options;o<i.length;o++){var r=i[o],l=document.createElement("option");l.innerText=r.text,l.value=r.value,t.default===parseInt(r.value)&&(l.selected=!0,l.ariaSelected="true"),n.appendChild(l)}var d=t.onChange;d&&(d(n.selectedOptions[0].value),n.addEventListener("change",(function(){return d(n.selectedOptions[0].value)}))),a.appendBrElement(e),a.appendBrElement(e)},a=this,o=0,i=t;o<i.length;o++)n(i[o])},e.appendBrElement=function(e){var t=document.createElement("br");e.appendChild(t)},e.appendText=function(e,t){if(this.assignTextClassNames(t),e)for(var n=0,a=e;n<a.length;n++){var o=a[n],i=document.createElement("p");i.innerText=o,t.appendChild(i)}},e.appendCredits=function(e,t){for(var n=0,a=t.sections;n<a.length;n++){var o=a[n],i=document.createElement("h2");i.classList.add("text-xl"),i.innerText=o.title,e.appendChild(i);var r=document.createElement("ul");r.classList.add("ml-5");for(var l=0,d=o.contributors;l<d.length;l++){var s=d[l],c=document.createElement("li");c.innerText=s,r.appendChild(c)}e.appendChild(r)}},e.appendOKButton=function(e){var t=this,n=document.createElement("div");n.classList.add("w-fit","m-auto"),e.appendChild(n),this.appendBtn(n,"OK",(function(){return t.closeModal(e)}),!1,"button")},e.listenKeyboard=function(e){var t=this;e.addEventListener("keydown",(function(n){"Escape"!==n.key&&"Enter"!==n.key||t.closeModal(e)}))},e.appendMenu=function(e,t){var n=document.createElement("div");n.classList.add("w-1/3","m-auto"),e.appendChild(n);for(var a=0,o=t.buttons;a<o.length;a++){var i=o[a],r=document.createElement("button");r.type="button",r.innerText=i.text,r.classList.add("w-full","h-12","rounded-3xl","mt-3","mb-3"),this.assignButtonColor(r,i.isDanger),r.addEventListener("click",i.callback),n.appendChild(r)}},e.appendChangelog=function(e,t){var n=document.createElement("div");this.assignTextClassNames(n),e.appendChild(n);for(var a=0,o=t.releases;a<o.length;a++){var i=o[a],r=document.createElement("h2");r.classList.add("text-xl"),r.innerText="".concat(i.version," (").concat(i.status," release - ").concat(i.dateTime,")"),n.appendChild(r);var l=document.createElement("ul");l.classList.add("ml-5"),n.appendChild(l);for(var d=0,s=i.points;d<s.length;d++){var c=s[d],u=document.createElement("li");if(u.innerText=c.text,l.appendChild(u),c.subPoints&&c.subPoints.length>0){var p=document.createElement("ol");p.classList.add("list-decimal","ml-5"),u.appendChild(p);for(var h=0,f=c.subPoints;h<f.length;h++){var m=f[h],v=document.createElement("li");v.innerText=m,p.appendChild(v)}}}}},e.assignTextClassNames=function(e){e.classList.add("w-11/12","m-auto","mt-3","mb-3","grid","gap-3","max-h-screen-1/4","overflow-y-auto")},e.assignButtonColor=function(e,t){t?e.classList.add("bg-red-600"):e.classList.add("bg-theme-color","dark:bg-dark-theme-color")},e.closeModal=function(e){document.body.contains(e)&&document.body.removeChild(e)},e.closeAllOpenDialogs=function(){for(var e=document.getElementsByClassName("dialog"),t=0;t<e.length;t++)this.closeModal(e[t])},e.confirm=function(t){return e.modal(a.DialogType.Confirmation,t)},e.notify=function(t){return e.modal(a.DialogType.Notification,t)},e.prompt=function(t){return e.modal(a.DialogType.Prompt,t)},e.credit=function(t){return e.modal(a.DialogType.Credits,t)},e.menu=function(t){return e.modal(a.DialogType.Menu,t)},e.changelog=function(t){return e.modal(a.DialogType.Changelog,t)},e}();t.default=o},487:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DialogType=void 0,function(e){e[e.Confirmation=0]="Confirmation",e[e.Notification=1]="Notification",e[e.Prompt=2]="Prompt",e[e.Credits=3]="Credits",e[e.Menu=4]="Menu",e[e.Changelog=5]="Changelog"}(n||(t.DialogType=n={}))},11:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=n(630),o=n(809);t.default=function(e){switch(e){case 1:return new a.default;case 2:return new o.default;default:return!0}}},721:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=this;this.getBgImg=function(){return e.backgroundImage}}},630:function(e,t,n){var a,o=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundImage="./images/bg-lvl1.png",t}return o(t,e),t}(n(721).default);t.default=i},809:function(e,t,n){var a,o=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundImage="./images/bg-demo-black.png",t}return o(t,e),t}(n(721).default);t.default=i},962:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=n(212);t.default=function(e,t){return e.getX()===t.bgWidth&&(t.currentLvl++,e.resetPosition(),a.default.notify({id:"new-level",title:"New Level",text:["Welcome to level ".concat(t.currentLvl)]})),t.currentLvl}},147:e=>{e.exports=JSON.parse('{"version":"0.0.7 Preview","devDependencies":{"concurrently":"^8.2.2","postcss":"^8.4.33","serve":"^14.2.1","tailwindcss":"^3.4.1","ts-loader":"^9.5.1","typescript":"^5.3.3","webpack":"^5.89.0","webpack-cli":"^5.1.4"},"scripts":{"webpack":"npx webpack --watch","serve":"npx serve -l 5000","tailwind":"npx tailwindcss -i ./src/main.css -o ./dist/bundle.css --watch --minify","dev":"npx concurrently \\"npm run webpack\\" \\"npm run serve\\" \\"npm run tailwind\\"","start":"npm run dev"}}')}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,n),i.exports}(()=>{var e=n(386),t=n(147),a=n(417),o=n(136),i=n(962),r=n(11),l=n(212),d=document.getElementById("canvas"),s=d.getContext("2d"),c=new e.default,u=1;function p(){d.height=window.innerHeight,d.width=window.innerWidth}(0,a.default)(d,c),window.addEventListener("resize",p),p(),document.getElementById("version").innerText=t.version,d.focus(),function e(){var t=(0,r.default)(u);if(!0===t)alert("Game complete! Demo for now.. Replace later.");else{var n=(0,o.default)({canvas:d,context:s,mainCharacter:c,level:t});c.setLimits(n.width,n.height),c.paint(s),u=(0,i.default)(c,{bgWidth:n.width,currentLvl:u}),requestAnimationFrame(e)}}(),l.default.notify({id:"dialog-game-welcome",title:"Welcome",text:["Welcome to Turtle Escape!"]})})()})();
//# sourceMappingURL=bundle.js.map