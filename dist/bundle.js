(()=>{"use strict";var e={136:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.load=function(e){return new Promise((function(t,n){var a=document.createElement("img");a.src=e.level.getBgImg(),a.onload=function(){return t(a)},a.onerror=function(){return n(new Error("Could not load level background"))}}))},e.paint=function(t,n){var a=e.calculateScreenCutOffPoints(t.width,n.canvas.width),r=e.calculateScreenCutOffPoints(t.height,n.canvas.height),o=n.mainCharacter.getX()<n.canvas.width?0:a[Math.floor(t.width/n.mainCharacter.getX())-1],i=n.mainCharacter.getY()<n.canvas.height?0:r[Math.floor(t.height/n.mainCharacter.getY())-1];n.context.drawImage(t,o,i,n.canvas.width,n.canvas.height,0,0,n.canvas.width,n.canvas.height)},e.calculateScreenCutOffPoints=function(e,t){for(var n=[],a=Math.floor(e/t),r=1;r<a;r++)n.push(r*t);return n.push(e-a*t),n},e.readjustCanvasForBg=function(e,t){t.height<e.height&&(e.height=t.height),t.width<e.width&&(e.width=t.width)},e}();t.default=n},386:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=n(307),r=function(){function e(){var e=this;this.getX=function(){return e.x},this.getY=function(){return e.y},this.resetPosition(),this.angle=a.default.right,this.setBgStart(0,0)}return e.prototype.resetPosition=function(){this.x=50,this.y=10},e.prototype.setBgStart=function(e,t){this.bgStartX=e,this.bgStartY=t},e.prototype.setYLimit=function(e){this.limitY=e},e.prototype.moveUp=function(){this.rotate(a.default.up),this.y>0&&(this.y-=e.step)},e.prototype.moveDown=function(){this.rotate(a.default.down),this.y<this.limitY&&(this.y+=e.step)},e.prototype.moveLeft=function(){this.rotate(a.default.left),this.x>0&&(this.x-=e.step)},e.prototype.moveRight=function(){this.rotate(a.default.right),this.x+=e.step},e.prototype.rotate=function(e){this.angle=e},e.prototype.applyRotation=function(e){e.translate(this.x,this.y),e.rotate(this.angle),e.translate(-this.x,-this.y)},e.prototype.loadImage=function(){var e=this;return new Promise((function(t,n){var a=document.createElement("img");a.src="./images/turtle.png",a.onload=function(){e.image=a,t(a)},a.onerror=function(){return n(new Error("Failed to load turtle image"))}}))},e.prototype.paint=function(e){this.applyRotation(e),e.drawImage(this.image,this.x-this.bgStartX,this.y-this.bgStartY,this.image.width/4,this.image.height/4),e.resetTransform()},e.step=3,e}();t.default=r},307:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={up:0,right:Math.PI/2,down:Math.PI,left:Math.PI+Math.PI/2};t.default=n},417:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=n(691),r=n(903),o=n(525);t.default=function(e){var t=e.canvas,n=e.mainCharacter,i=e.upBtnId,l=e.leftBtnId,u=e.rightBtnId,c=e.downBtnId;(0,a.default)(t,n),(0,o.default)(t,n),(0,r.default)(n,{upBtnId:i,leftBtnId:l,rightBtnId:u,downBtnId:c})}},691:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.addEventListener("keydown",(function(e){return function(e,t){["w","W","ArrowUp"].includes(e.key)&&t.moveUp(),["s","S","ArrowDown"].includes(e.key)&&t.moveDown(),["a","A","ArrowLeft"].includes(e.key)&&t.moveLeft(),["d","D","ArrowRight"].includes(e.key)&&t.moveRight()}(e,t)}))}},903:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=0;function a(e,t){t(),n=requestAnimationFrame((function(){return a(e,t)}))}function r(){cancelAnimationFrame(n)}function o(e,t,n){t.addEventListener("mousedown",(function(){return a(e,n)})),t.addEventListener("mouseup",r),t.addEventListener("mouseleave",r),t.addEventListener("touchstart",(function(){return a(e,n)})),t.addEventListener("touchend",r)}t.default=function(e,t){var n=document.getElementById(t.upBtnId),a=document.getElementById(t.leftBtnId),r=document.getElementById(t.rightBtnId),i=document.getElementById(t.downBtnId);o(e,n,(function(){return e.moveUp()})),o(e,a,(function(){return e.moveLeft()})),o(e,r,(function(){return e.moveRight()})),o(e,i,(function(){return e.moveDown()}))}},525:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.addEventListener("wheel",(function(e){return function(e,t){e.preventDefault(),e.deltaX<0&&t.moveLeft(),e.deltaX>0&&t.moveRight(),e.deltaY<0&&t.moveUp(),e.deltaY>0&&t.moveDown()}(e,t)}))}},212:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=n(487),r=function(){function e(){}return e.modal=function(e,t){var n=this;if(!document.getElementById(t.id)){var r=document.createElement("div");if(r.tabIndex=1,r.id=t.id,r.classList.add("dialog","fixed","text-white","w-4/5","opacity-80","focus:opacity-95","bg-amber-500","dark:bg-gray-900","pt-5","pb-5","rounded-3xl","max-w-xl"),t.title){var o=document.createElement("h1");o.innerText=t.title,o.classList.add("text-center","text-xl"),r.appendChild(o),r.appendChild(document.createElement("hr"))}var i=document.createElement("div");switch(this.appendText(t.text,i),r.appendChild(i),e){case a.DialogType.Confirmation:var l=t,u=document.createElement("div");u.classList.add("w-fit","m-auto"),r.appendChild(u),this.appendBtn(u,"Yes",(function(){l.yesCallback(),n.closeModal(r)}),!1,"button"),this.appendBtn(u,"No",(function(){l.noCallback(),n.closeModal(r)}),!0,"button");break;case a.DialogType.Notification:this.appendOKButton(r),this.listenKeyboard(r);break;case a.DialogType.Prompt:var c=t;this.appendForm(r,c);break;case a.DialogType.Credits:c=t,this.appendCredits(i,c),this.appendOKButton(r),this.listenKeyboard(r);break;case a.DialogType.Menu:c=t,this.appendMenu(r,c),this.appendOKButton(r),this.listenKeyboard(r);break;case a.DialogType.Changelog:c=t,this.appendChangelog(r,c),this.appendOKButton(r),this.listenKeyboard(r)}document.body.appendChild(r)}},e.appendBtn=function(e,t,n,a,r){var o=document.createElement("button");o.type=r,o.classList.add("rounded-3xl","m-1","cursor-pointer"),this.assignButtonColor(o,a);var i=document.createElement("span");i.classList.add("text-xl","ml-2","mr-2"),i.innerText=t,o.appendChild(i),"button"===r&&o.addEventListener("click",n),e.appendChild(o)},e.appendForm=function(e,t){var n=this,a=document.createElement("div");a.classList.add("m-auto","w-3/4"),e.appendChild(a);var r=document.createElement("form");a.appendChild(r),r.addEventListener("submit",(function(a){a.preventDefault(),t.onOK&&t.onOK(),n.closeModal(e)})),this.appendInputs(r,t.inputs),this.appendSelects(r,t.selects);var o=document.createElement("div");o.classList.add("w-fit","m-auto"),r.appendChild(o),this.appendBtn(o,"OK",null,!1,"submit"),this.appendBtn(o,"Cancel",(function(){t.onCancel&&t.onCancel(),n.closeModal(e)}),!0,"button")},e.appendInputs=function(e,t){for(var n=0,a=t;n<a.length;n++){var r=a[n],o=document.createElement("input");o.type=r.type,o.id="dialog-input-".concat(r.name),o.name="dialog-input-".concat(r.name),o.ariaPlaceholder="Enter ".concat(r.label),o.placeholder="Enter ".concat(r.label),o.maxLength=r.limit,this.assignInputClassNames(o),o.required=r.required,o.ariaRequired=r.required.toString(),e.appendChild(o),this.appendBrElement(e),this.appendBrElement(e)}},e.assignInputClassNames=function(e){e.classList.add("text-center","w-full","rounded-3xl","h-9","text-lg","text-gray-700")},e.appendSelects=function(e,t){for(var n=function(t){var n=document.createElement("select");n.id="dialog-select-".concat(t.name),n.name="dialog-select-".concat(t.name),n.ariaPlaceholder=t.label,a.assignInputClassNames(n),n.required=t.required,n.ariaRequired=t.required.toString(),e.appendChild(n);for(var r=0,o=t.options;r<o.length;r++){var i=o[r],l=document.createElement("option");l.innerText=i.text,l.value=i.value,t.default===parseInt(i.value)&&(l.selected=!0,l.ariaSelected="true"),n.appendChild(l)}var u=t.onChange;u&&(u(n.selectedOptions[0].value),n.addEventListener("change",(function(){return u(n.selectedOptions[0].value)}))),a.appendBrElement(e),a.appendBrElement(e)},a=this,r=0,o=t;r<o.length;r++)n(o[r])},e.appendBrElement=function(e){var t=document.createElement("br");e.appendChild(t)},e.appendText=function(e,t){if(this.assignTextClassNames(t),e)for(var n=0,a=e;n<a.length;n++){var r=a[n],o=document.createElement("p");o.innerText=r,t.appendChild(o)}},e.appendCredits=function(e,t){for(var n=0,a=t.sections;n<a.length;n++){var r=a[n],o=document.createElement("h2");o.classList.add("text-xl"),o.innerText=r.title,e.appendChild(o);var i=document.createElement("ul");i.classList.add("ml-5");for(var l=0,u=r.contributors;l<u.length;l++){var c=u[l],s=document.createElement("li");s.innerText=c,i.appendChild(s)}e.appendChild(i)}},e.appendOKButton=function(e){var t=this,n=document.createElement("div");n.classList.add("w-fit","m-auto"),e.appendChild(n),this.appendBtn(n,"OK",(function(){return t.closeModal(e)}),!1,"button")},e.listenKeyboard=function(e){var t=this;e.addEventListener("keydown",(function(n){"Escape"!==n.key&&"Enter"!==n.key||t.closeModal(e)}))},e.appendMenu=function(e,t){var n=document.createElement("div");n.classList.add("w-1/3","m-auto"),e.appendChild(n);for(var a=0,r=t.buttons;a<r.length;a++){var o=r[a],i=document.createElement("button");i.type="button",i.innerText=o.text,i.classList.add("w-full","h-12","rounded-3xl","mt-3","mb-3"),this.assignButtonColor(i,o.isDanger),i.addEventListener("click",o.callback),n.appendChild(i)}},e.appendChangelog=function(e,t){var n=document.createElement("div");this.assignTextClassNames(n),e.appendChild(n);for(var a=0,r=t.releases;a<r.length;a++){var o=r[a],i=document.createElement("h2");i.classList.add("text-xl"),i.innerText="".concat(o.version," (").concat(o.status," release - ").concat(o.dateTime,")"),n.appendChild(i);var l=document.createElement("ul");l.classList.add("ml-5"),n.appendChild(l);for(var u=0,c=o.points;u<c.length;u++){var s=c[u],d=document.createElement("li");if(d.innerText=s.text,l.appendChild(d),s.subPoints&&s.subPoints.length>0){var p=document.createElement("ol");p.classList.add("list-decimal","ml-5"),d.appendChild(p);for(var f=0,h=s.subPoints;f<h.length;f++){var m=h[f],v=document.createElement("li");v.innerText=m,p.appendChild(v)}}}}},e.assignTextClassNames=function(e){e.classList.add("w-11/12","m-auto","mt-3","mb-3","grid","gap-3","max-h-screen-1/4","overflow-y-auto")},e.assignButtonColor=function(e,t){t?e.classList.add("bg-red-600"):e.classList.add("bg-theme-color","dark:bg-dark-theme-color")},e.closeModal=function(e){document.body.contains(e)&&document.body.removeChild(e)},e.closeAllOpenDialogs=function(){for(var e=document.getElementsByClassName("dialog"),t=0;t<e.length;t++)this.closeModal(e[t])},e.confirm=function(t){return e.modal(a.DialogType.Confirmation,t)},e.notify=function(t){return e.modal(a.DialogType.Notification,t)},e.prompt=function(t){return e.modal(a.DialogType.Prompt,t)},e.credit=function(t){return e.modal(a.DialogType.Credits,t)},e.menu=function(t){return e.modal(a.DialogType.Menu,t)},e.changelog=function(t){return e.modal(a.DialogType.Changelog,t)},e}();t.default=r},487:(e,t)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DialogType=void 0,function(e){e[e.Confirmation=0]="Confirmation",e[e.Notification=1]="Notification",e[e.Prompt=2]="Prompt",e[e.Credits=3]="Credits",e[e.Menu=4]="Menu",e[e.Changelog=5]="Changelog"}(n||(t.DialogType=n={}))},11:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=n(10);t.default=function(e){return!(e<=a.default.length)||a.default[e-1]}},721:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=this;this.getBgImg=function(){return e.backgroundImage}}},630:function(e,t,n){var a,r=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundImage="./images/bg-lvl1.png",t}return r(t,e),t}(n(721).default);t.default=o},809:function(e,t,n){var a,r=this&&this.__extends||(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.backgroundImage="./images/bg-demo-black.png",t}return r(t,e),t}(n(721).default);t.default=o},10:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});var a=n(630),r=n(809),o=[new a.default,new r.default];t.default=o},519:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{u(a.next(e))}catch(e){o(e)}}function l(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((a=a.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,a=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(386),i=n(147),l=n(417),u=n(962),c=n(11),s=n(212),d=n(136),p=n(630);a(void 0,void 0,void 0,(function(){function e(){return a(this,void 0,void 0,(function(){var t,a;return r(this,(function(r){switch(r.label){case 0:return!0!==(v=(0,c.default)(m))?[3,1]:(s.default.notify({id:"game-over-dialog",title:"Game complete",text:["Game complete. Congratulations!"]}),[3,4]);case 1:return r.trys.push([1,3,,4]),[4,(0,u.default)(h,{bgWidth:g.width,currentLvl:m})];case 2:return(t=r.sent())&&(g=t,d.default.readjustCanvasForBg(n,g)),d.default.paint(g,{canvas:n,context:f,mainCharacter:h}),h.setYLimit(g.height),h.paint(f),requestAnimationFrame(e),[3,4];case 3:return a=r.sent(),s.default.notify({id:"game-error",title:"Error",text:[a]}),[3,4];case 4:return[2]}}))}))}function t(){n.height=window.innerHeight,n.width=window.innerWidth}var n,f,h,m,v,g;return r(this,(function(a){switch(a.label){case 0:return n=document.getElementById("canvas"),f=n.getContext("2d"),[4,(h=new o.default).loadImage()];case 1:return a.sent(),m=1,(0,l.default)({canvas:n,mainCharacter:h,upBtnId:"upBtn",leftBtnId:"leftBtn",rightBtnId:"rightBtn",downBtnId:"downBtn"}),v=new p.default,[4,d.default.load({canvas:n,context:f,mainCharacter:h,level:v})];case 2:return g=a.sent(),window.addEventListener("resize",t),t(),document.getElementById("version").innerText=i.version,n.focus(),e(),s.default.notify({id:"dialog-game-welcome",title:"Welcome",text:["Welcome to Turtle Escape!"]}),[2]}}))}))},962:function(e,t,n){var a=this&&this.__awaiter||function(e,t,n,a){return new(n||(n=Promise))((function(r,o){function i(e){try{u(a.next(e))}catch(e){o(e)}}function l(e){try{u(a.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}u((a=a.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,a,r,o,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(u){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(n=1,a&&(r=2&l[0]?a.return:l[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,l[1])).done)return r;switch(a=0,r&&(l=[2&l[0],r.value]),l[0]){case 0:case 1:r=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,a=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!((r=(r=i.trys).length>0&&r[r.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!r||l[1]>r[0]&&l[1]<r[3])){i.label=l[1];break}if(6===l[0]&&i.label<r[1]){i.label=r[1],r=l;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(l);break}r[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],a=0}finally{n=r=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(136),i=n(212),l=n(11),u=n(10);t.default=function(e,t){return a(this,void 0,void 0,(function(){var n;return r(this,(function(a){switch(a.label){case 0:return e.getX()>=t.bgWidth?(t.currentLvl++,e.resetPosition(),t.currentLvl<=u.default.length?(i.default.notify({id:"new-level",title:"New Level",text:["Welcome to level ".concat(t.currentLvl)]}),n=(0,l.default)(t.currentLvl),[4,o.default.load({level:n})]):[3,2]):[3,2];case 1:return[2,a.sent()];case 2:return[2,null]}}))}))}},147:e=>{e.exports=JSON.parse('{"version":"0.0.9 Preview","devDependencies":{"concurrently":"^8.2.2","postcss":"^8.4.33","serve":"^14.2.1","tailwindcss":"^3.4.1","ts-loader":"^9.5.1","typescript":"^5.3.3","webpack":"^5.89.0","webpack-cli":"^5.1.4"},"scripts":{"webpack":"npx webpack --watch","serve":"npx serve -l 5000","tailwind":"npx tailwindcss -i ./src/main.css -o ./dist/bundle.css --watch --minify","dev":"npx concurrently \\"npm run webpack\\" \\"npm run serve\\" \\"npm run tailwind\\"","start":"npm run dev"}}')}},t={};!function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a].call(o.exports,o,o.exports,n),o.exports}(519)})();
//# sourceMappingURL=bundle.js.map